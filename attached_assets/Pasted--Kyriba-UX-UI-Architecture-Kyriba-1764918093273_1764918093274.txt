بازسازی تجربه کاربری Kyriba با رویکرد بومی (UX/UI Architecture)هدف اصلی، ارائه تجربه‌ای مشابه Kyriba اما بومی‌سازی شده است. این به معنای انتقال از «مشاهده موجودی» به «مدیریت فعال موقعیت نقدینگی» است.۲.۱ کاربرگ موقعیت نقدینگی (Cash Position Worksheet)این قلب تپنده سیستم است. در Kyriba، این کاربرگ ترکیبی از مانده‌های بانکی و پیش‌بینی‌هاست.2 برای نسخه ایرانی، این ماژول باید به صورت زیر طراحی شود:ساختار شبکه داده (Data Grid): استفاده از AG Grid Enterprise ضروری است. این کامپوننت اجازه می‌دهد تا داده‌ها مانند اکسل گروه‌بندی (Pivot) شوند. کاربر باید بتواند ستون «نام بانک» را به هدر بکشد و بلافاصله کل موجودی را به تفکیک بانک (ملت، پاسارگاد، سامان) مشاهده کند.10منطق محاسبه موجودی در دسترس:$$Available Liquidity = (Ledger Balance) + (Incoming Cleared Cheques) - (Blocked Amounts) - (Pending PAYA Outflows)$$سیستم باید به صورت هوشمند، مبالغ «مسدودی» (Blocked) را که در حساب‌های ایرانی رایج است (مانند ضمانت‌نامه‌ها) از نقدینگی عملیاتی کسر کند.۲.۲ داشبورد بصری و تراکم اطلاعاتطراحی باید از الگوهای «تراکم بالا» (High Density) پیروی کند، نه فضای سفید زیاد که در اپلیکیشن‌های موبایل رایج است.12سلسله مراتب بصری:نوار ابزار بالا (KPIs): کل نقدینگی (تبدیل شده به ارز پایه)، مجموع بدهی‌های سررسید شده امروز، وضعیت ارزی (Long/Short Position).نمودار آبشاری (Waterfall Chart): نمایش حرکت از «موجودی اول صبح» به «موجودی پیش‌بینی شده پایان روز» با نمایش ورودی‌ها و خروجی‌ها به صورت پلکانی.13جدول تراکنش‌ها: با قابلیت Drill-down. کلیک روی عدد موجودی بانک تجارت، باید ریز تراکنش‌های آن را باز کند.14۲.۳ بومی‌سازی تقویم و زبانتقویم شمسی (Jalali): تمامی ماژول‌های پیش‌بینی و گزارش‌دهی باید بر اساس تقویم هجری شمسی کار کنند. استفاده از کتابخانه‌هایی مانند react-multi-date-picker در فرانت‌اند و jdatetime در بک‌‌اند پایتون الزامی است.15فرمت‌دهی اعداد: اعداد در ورودی‌ها باید استاندارد (ASCII) باشند تا محاسبات درست انجام شود، اما در لایه نمایش (Presentation Layer) باید به صورت فارسی و با جداکننده هزارگان نمایش داده شوند.۳. معماری مدیریت چند ارزی و نرخ‌های چندگانه (Multi-Currency Engine)پیچیده‌ترین بخش پیاده‌سازی در ایران، مدیریت واقعیت‌های ارزی است: وجود دو واحد پول (ریال/تومان) و چندین نرخ برابری.۳.۱ دوگانگی ریال و توماناگرچه واحد رسمی «ریال» است، اما تفکر مدیران مالی بر اساس «تومان» است.قانون طلایی ذخیره‌سازی: تمامی مقادیر مالی در دیتابیس باید به صورت ریال و با فرمت BigInt (عدد صحیح بزرگ) ذخیره شوند. استفاده از اعشار (Float/Decimal) به دلیل خطاهای محاسباتی IEEE 754 ممنوع است.17لایه تبدیل (Transformation Layer): در سطح API (Serializer) یا Frontend، یک ضریب تبدیل (تقسیم بر ۱۰) اعمال می‌شود. داشبورد باید یک دکمه Global Toggle داشته باشد: "نمایش به: تومان | ریال".19۳.۲ سیستم نرخ‌دهی سه لایه (Triple Exchange Rate System)یک سیستم TMS جهانی معمولاً یک نرخ Spot دارد. در ایران، یک دلار می‌تواند سه ارزش داشته باشد 20:نرخ رسمی (بانک مرکزی): برای کالاهای اساسی.نرخ نیما (سامانه نیما): برای صادرکنندگان و واردکنندگان (B2B).نرخ بازار آزاد: نرخ واقعی کف بازار که هزینه‌های جایگزینی سرمایه را تعیین می‌کند.مدلسازی داده:جدول ExchangeRate باید شامل فیلد rate_type (ENUM: 'OFFICIAL', 'NIMA', 'FREE') باشد. داشبورد باید به مدیر مالی اجازه دهد تا سناریوی «ارزش‌گذاری» (Valuation) را انتخاب کند. مثلاً: "ارزش دارایی‌های ارزی من با نرخ نیما چقدر است؟" در مقابل "اگر بخواهم همین الان نقد کنم (نرخ آزاد) چقدر است؟".۳.۳ منابع داده نرخ ارزبرای خودکارسازی دریافت نرخ‌ها، عامل هوشمند باید اسکرپرهایی (Scrapers) برای منابع زیر ایجاد کند:API بن‌بست (Bonbast): معتبرترین منبع برای نرخ بازار آزاد.21سامانه سنا/نیما: اسکرپ کردن سایت بانک مرکزی یا استفاده از APIهای واسط مانند نوسان.23طلای ۱۸ عیار و سکه: بسیاری از شرکت‌ها نقدینگی مازاد را به طلا تبدیل می‌کنند. سیستم باید قیمت لحظه‌ای صندوق‌های طلا (ETF) را از TSETMC دریافت کند.۴. هوش مصنوعی و تحلیل‌های پیش‌بینانه (AI & Predictive Analytics)درخواست اصلی شامل "امکانات هوش مصنوعی" است. در مدیریت نقدینگی، این به معنای دو کاربرد اصلی است: پیش‌بینی جریان وجوه نقد و کشف تقلب.۴.۱ پیش‌بینی نقدینگی با Facebook Prophetمدل‌های سنتی مانند ARIMA برای داده‌های مالی ایران که دارای "فصلی‌بودن شدید" (مانند شب عید، ماه رمضان) و "تأثیرات تعطیلات" (تعطیلات نوروز) هستند، کارایی ندارند. کتابخانه Prophet (توسعه یافته توسط متا) بهترین گزینه است.24مدلسازی تعطیلات نوروز: تعطیلات طولانی نوروز (حدود ۲ هفته) باعث افت شدید تراکنش‌ها می‌شود. اگر مدل این را نداند، آن را به عنوان یک "کاهش نقدینگی خطرناک" تفسیر می‌کند.راهکار فنی: ایجاد یک DataFrame اختصاصی از تعطیلات شمسی برای ۵ سال آینده و تزریق آن به پارامتر holidays در مدل Prophet.رگرسورهای خارجی (External Regressors): مدل باید قیمت دلار (نرخ آزاد) را به عنوان یک رگرسور اضافی دریافت کند. تجربه نشان داده همبستگی بالایی (با تأخیر زمانی) بین جهش ارزی و نیاز به نقدینگی ریالی وجود دارد.۴.۲ کشف ناهنجاری (Anomaly Detection) با Isolation Forestبرای امنیت تراکنش‌ها، سیستم باید هر درخواست انتقال وجه را پیش از ارسال به بانک تحلیل کند.26الگوریتم: استفاده از Isolation Forest از کتابخانه PyOD. این الگوریتم برای داده‌های با ابعاد بالا بسیار کارآمد است.فیچرهای مدل:مبلغ تراکنش.زمان تراکنش (مثلاً انتقال ساتنا در ساعت ۲ بامداد یک ناهنجاری است).مقصد تراکنش (آیا این شماره شبا قبلاً استفاده شده است؟).اقدام: اگر anomaly_score از حد آستانه عبور کند، سیستم تراکنش را مسدود کرده و درخواست "تاییدیه ثانویه" (Two-Factor Authentication) یا تایید مدیر ارشد را صادر می‌کند.۴.۳ دستیار هوشمند خزانه‌داری (Generative AI / LLM)برای ایجاد تجربه تعاملی، سیستم می‌تواند از یک مدل زبانی (مانند Llama 3 یا GPT-4 via API) مجهز به RAG (Retrieval-Augmented Generation) استفاده کند.سناریو: مدیر مالی می‌پرسد: «اگر حقوق‌ها را امروز پرداخت کنیم، آیا برای چک تامین اجتماعی هفته بعد موجودی داریم؟»فرآیند: LLM با دسترسی به جداول Transactions و Forecasts، کوئری SQL تولید کرده، اجرا می‌کند و پاسخ را به زبان طبیعی فارسی ارائه می‌دهد.